---
title: "[Effective C#] 챕터2 .NET 리소스 관리"

categories:
  - Effective C#
tags:
  - [Effective C#, C#, Programming, Book Summary]
# 태그는 무조건 2개 이상(1개면 글이 안보임)

toc: true                         # 목차
toc_sticky: true                  # 목차 사이드바 고정

published: true                   #글 공개 여부

date:       2023-08-03T00:00:00+09:00
lastmod:    2023-08-03T00:00:00+09:00
---

<!-- description : 25자에서 160자 사이 -->
이펙티브 C#의 챕터2 .NET 리소스 관리를 읽고 정리한 글입니다.<br>
참고 책 : 이펙티브 C#
{: .notice--warning}

## 아이템 12 : 할당 구문보다 멤버 초기화 구문이 좋다

- 생성자가 늘어나면서 **멤버 변수에 대한 초기화 코드를 누락하는 경우가 있다**
- 이러한 오류를 범하지 않으려면 생성자의 본문에서 멤버 변수에 값을 할당하기보다 멤버 초기화 구문을 사용하는 것이 좋다

```c#
public class MyClass
{
    // 컬렉션을 선언하는 동시에 초기화
    private List<string> labels = new List<string>();
}
```

- 멤버 초기화 구문을 사용하면 생성자가 계속 늘어나도 실수로 인해 초기화가 누락될 가능성이 없다
- 멤버 초기화 구문을 사용하면 컴파일러가 생성자 앞쪽에 초기화 구문을 포함시킨다
  - 초기화 순서 : 멤버 초기화 구문 -> 상위 클래스의 생성자 -> 생성자 본문

### 멤버 초기화 구문을 사용하지 않는 편이 좋은 경우
  - **객체를 0이나 null로 초기화하는 경우**
    - 기본적으로 0이나 null로 초기화함
    - 다시 0이나 null로 설정하는 것은 성능 낭비
  - **동일한 객체를 반복해서 초기화하는 경우**
    - 멤버 초기화 구문에서 할당하고 특정 생성자에서 다시 할당하면 처음 할당했던 **메모리는 가비지가 됨**
  - **예외 처리가 반드시 필요한 경우**
    - 멤버 초기화 구문은 **try로 감쌀 수 없음**
    - 클래스 내부에서 처리가 필요하다면 생성자 본문에 초기화 코드 작성

## 아이템 13 : 정적 클래스 멤버를 올바르게 초기화하라

- 정적 멤버 변수를 포함하는 타입이 있다면 인스턴스를 생성하기 전에 반드시 정적 멤버 변수를 초기화해야 한다
- 초기화 방법에는 정적 멤버 초기화 구문과 정적 생성자가 있다
- 정적 생성자는 타입 내에 정의된 모든 메서드, 변수, 속성에 **최초로 접근 하기 전에 자동으로 호출되는 메서드**이다
- 정적 변수를 초기화하기 위해서 인스턴스 생성자나 전용의 private 메서드 혹은 다른 관용구를 사용해서는 안 된다
- `Lazy<T>`를 사용해 해당 필드에 최초로 접근하는 시점까지 초기화 작업을 미룰 수 있다
- 정적 멤버를 **간단히 초기화**하는 경우라면 멤버 초기화 구문을 사용하는 것이 좋다
- 초기화 과정이 **복잡하거나 예외 처리**를 해주어야 한다면 정적 생성자를 사용하는 것이 좋다
- 정적 멤버 초기화 구문는 정적 생성자가 호출되기 이전에 실행된다
- 정적 생성자는 CLR에 의해서 호출되기 때문에 예외가 발생할 가능성이 있는 경우라면 매우 조심스럽게 다뤄야 한다
  - 예외 발생시 CLR은 TypeInitializationException을 던지고 응용프로그램을 종료함

## 아이템 14 : 초기화 코드가 중복되는 것을 최소화하라

- 초기화를 할 때 private 헬퍼 메서드를 작성하기 보다는 공용으로 사용할 수 있는 생성자를 작성하는 편이 낫다
- private 헬퍼 메서드에서는 readonly 변수를 초기화 하지 못한다
- 매개변수의 기본값은 컴파일타임 상수만 사용할 수 있다

```c#
public class MyClass
{
    public MyClass(int a, int b)
    {

    }

    public MyClass(int a, int b, string str) : this(a, b)
    {

    }
}
```




***
<br>

    💻 열심히 공부해서 작성 중이니 오류나 틀린 부분이 있을 경우 
      언제든지 댓글 혹은 메일로 알려주시면 감사하겠습니다! 😸


[맨 위로 이동하기](#){: .btn .btn--primary }{: .align-right}